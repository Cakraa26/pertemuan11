<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tambah Data Mahasiswa</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" />
  </head>
  <body>
    <div class="container">
      <h3>Tambah Data Mahasiswa</h3>
      <form id="formDataMHS" method="POST" action="http://localhost/pertemuan11/tambahdata.php">
        <div class="form-group mb-3">
          <label for="txNIM" class="form-label">NIM</label>
          <input type="text" class="form-control" name="txNIM" id="txNIM" />
        </div>
        <div class="form-group mb-3">
          <label for="txNAMA" class="form-label">Nama Mahasiswa</label>
          <input type="text" class="form-control" name="txNAMA" id="txNAMA" />
        </div>
        <div class="form-group mb-3">
          <label for="txTGL" class="form-label">Tanggal Lahir</label>
          <input type="date" class="form-control" name="txTGL" id="txTGL" />
        </div>
        <div class="form-group mb-3">
          <label for="txJK" class="form-label">Jenis Kelamin</label>
          <select class="form-select" name="txJK" id="txJK">
            <option selected disabled>Pilih Jenis Kelamin</option>
            <option value="L">Laki - laki</option>
            <option value="P">Perempuan</option>
          </select>
        </div>
        <div class="form-group mb-3">
          <label for="txALAMAT" class="form-label">Alamat</label>
          <input type="text" class="form-control" name="txALAMAT" id="txALAMAT" />
        </div>
        <div class="form-group">
          <a class="btn btn-secondary" href="detailmahasiswa.html">Batal</a>
          <button type="submit" id="cmdSIMPAN" class="btn btn-primary">Simpan</button>
        </div>
      </form>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      let frm = document.getElementById('formDataMHS');
      async function handleSubmit(event) {
        let dta = new FormData(event.target);
        fetch(event.target, {
          method: form.method,
          body: dta,
          headers: {
            Accept: 'application/json',
          },
        })
          .then((response) => {
            if (response.ok) {
              form.reset();
            } else {
              alert('Ada kendala pengiriman data ke server');
            }
          })
          .catch((error) => alert('Terjadi error'));
      }

      frm.addEventListener("submit", handleSubmit());
    </script>
  </body>
</html>
